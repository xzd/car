<!DOCTYPE html>
<html>
    <head> 
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
        <title>简单的html5 File测试 for pic2base64</title> 
        <style> 
        </style> 
        <script>
            window.onload = function () {
                var input = document.getElementById("demo_input");
                var result = document.getElementById("result");
                var img_area = document.getElementById("img_area");
                if (typeof (FileReader) === 'undefined') {
                    result.innerHTML = "抱歉，你的浏览器不支持 FileReader，请使用现代浏览器操作！";
                    input.setAttribute('disabled', 'disabled');
                } else {
                    input.addEventListener('change', readFile, false);
                }
            }
            function readFile() {
                var file = this.files[0];
                //这里我们判断下类型如果不是图片就返回 去掉就可以上传任意文件   
                if (!/image\/\w+/.test(file.type)) {
                    alert("请确保文件为图像类型");
                    return false;
                }
                var reader = new FileReader();
                reader.readAsDataURL(file);
                console.log();
                reader.onload = function (e) {
                    result.innerHTML = this.result;
                    img_area.innerHTML = '<div class="sitetip">图片img标签展示：</div><img src="' + this.result + '" alt=""/>';
                }
            }
        </script> 
    </head>

    <body> 
        <form action="/index/upload2" method="post">
            <input type="file" id="demo_input" /> 
            <textarea name="img" id="result" rows=10 cols=300></textarea> 
            <p id="img_area"></p> 
            <input type="submit" value="提交">
        </form>
    </body> 
</html>